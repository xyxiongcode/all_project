# 图像尺寸修复说明

## 问题
DINOv2模型的patch_size=14，要求输入图像的高度和宽度必须是14的倍数。

错误信息：`Input image height 160 is not a multiple of patch height 14`

## 解决方案

### 1. 修改配置文件
- 将 `image_size` 从 160 改为 **168** (14 × 12)
- 168 仍然比 224 小，可以节省约 44% 的编码器内存

### 2. 代码修改
- `navdp_policy.py`: 确保 `image_size` 正确处理（支持整数或元组）
- 添加自动检查和调整，确保 `image_size` 是 14 的倍数

### 3. 有效的14的倍数尺寸
- 168 = 14 × 12 (推荐，节省内存)
- 196 = 14 × 14
- 224 = 14 × 16 (原始值)
- 252 = 14 × 18

## 当前配置
```python
image_size=168,  # 14的倍数，patch_size=14要求
```

## 注意事项
如果仍然出现160的错误，可能是：
1. Python模块缓存 - 重启Python进程
2. 数据集中的图像仍然是旧尺寸 - 确保数据集加载时使用新的image_size
3. 检查点文件缓存了旧配置 - 删除旧的检查点
